(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),r=n.n(s),c=n(31),i=n.n(c),o=(n(39),n(40),n(41),n(32)),l=n(2),d=n(14),u=function(){var e=Object(d.b)(),t=e.loginWithRedirect;return e.isAuthenticated&&(alert("Logging You In..."),setTimeout((function(){window.open("/user-page","_blank")}),500)),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:function(){t()},children:"Login"})})};var h=function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("h1",{children:"Welcome to the Board Game Meetup Tracker"}),Object(a.jsx)("h4",{children:"Powered by the Boardgamegeek API"}),Object(a.jsx)(u,{})]})},j=n(5),m=n(6),b=n(8),p=n(7),g=function(){var e=Object(d.b)().logout;return Object(a.jsx)("button",{className:"btn-danger btn",onClick:function(){return e()},children:"Log Out"})};var x=function(){return Object(a.jsxs)("ul",{className:"nav nav-tabs",children:[Object(a.jsx)("li",{className:"nav-item mx-auto",children:Object(a.jsx)("a",{href:"/user-page",children:"Your Page"})}),Object(a.jsx)("li",{className:"nav-item mx-auto",children:Object(a.jsx)("a",{href:"/meet-ups",children:"Meet-Ups"})}),Object(a.jsx)("li",{className:"nav-item mx-auto",children:Object(a.jsx)("a",{href:"/new-meet-up",children:"Post New Meet-Up"})}),Object(a.jsx)("li",{className:"nav-item mx-auto",children:Object(a.jsx)(g,{})})]})},O=n(4),f=n.n(O),v={searchGames:function(e){return f.a.get("https://www.boardgamegeek.com/xmlapi2/search?type=boardgame,boardgameexpansion&query="+e).then((function(e){console.log(e);var t=(new DOMParser).parseFromString(e.data,"text/xml");return console.log(t),t})).catch((function(e){console.log(e)})).then(console.log("Ran Search.."))},searchById:function(e){return f.a.get("https://www.boardgamegeek.com/xmlapi2/thing?id="+e).then((function(e){return(new DOMParser).parseFromString(e.data,"text/xml")}))},addGame:function(e){return console.log("Attempting to add game: "+e.title),f.a.post("/api/game",{title:e.title,bggId:e.bggId,imageString:e.imageString})},getGameByBGG:function(e){return f.a.get("/api/game/"+e)},getGameById:function(e){return f.a.get("/api/game/byId/"+e)},addUser:function(e){return f.a.post("/api/user",{username:e.userName,password:e.password})},setCurrentUser:function(e){return f.a.get("/api/user/"+e)},changeName:function(e,t){return f.a.put("/api/user/",{name:e,id:t})},addMeetup:function(e){return f.a.post("/api/meetup",{name:e.name,timeInfo:e.timeInfo,locationInfo:e.locationInfo,extraInfo:e.extraInfo,owner_id:e.ownerId})},getAllMeetups:function(){return f.a.get("/api/meetup/all")},getMeetup:function(e){return f.a.get("/api/meetup/"+e)},getMeetupByOwner:function(e){return f.a.get("/api/meetupByUser/"+e)},addUserGame:function(e){return f.a.post("/api/usergame",{userId:e.userId,gameId:e.gameId})},findUserGameByUser:function(e){return f.a.get("/api/usergame/byUser/"+e)},findUserGame:function(e){return f.a.get("/api/usergame",{userId:e.userId,gameId:e.gameId})},addUserMeetup:function(e){return f.a.post("/api/usermeetup",{meetupId:e.meetupId,attendeeId:e.attendeeId})},findUserMeetupByAttendee:function(e){return f.a.get("/api/usermeetup/byUser/"+e)},findUserMeetupByMeetup:function(e){return f.a.get("/api/usermeetup/byMeetup/"+e)}},y=function(e){return Object(a.jsxs)("div",{className:"card-container border rounded my-3 bg-dark text-white",children:[Object(a.jsx)("img",{className:"p-3",src:"https://via.placeholder.com/150",alt:e.title}),Object(a.jsxs)("div",{className:"desc p-3",children:[Object(a.jsx)("h2",{children:e.title}),Object(a.jsx)("h3",{children:e.bggId}),Object(a.jsx)("button",{className:"btn btn-primary",bggId:e.bggId,title:e.title,onClick:e.saveBtnPress,children:"Save"})]})]})};var I=function(e){return Object(a.jsx)("div",{className:"list",children:e.results.map((function(t,n){return Object(a.jsx)(y,{title:t.title,bggId:t.id,saveBtnPress:e.saveBtnPress},n)}))})},N=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){console.log("Library Mounted")},a.state={},a}return Object(m.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"library",children:Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"#"}),Object(a.jsx)("th",{scope:"col",children:"Game"})]})}),Object(a.jsx)("tbody",{children:this.props.library.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:t+1}),Object(a.jsx)("td",{children:e})]})}))})]})})}}]),n}(s.Component),w=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){console.log("COMPONENTDIDMOUNT"),v.findUserGameByUser(a.state.currentUser).then((function(e){console.log(e);for(var t=[],n=0;n<e.data.length;n++)v.getGameById(e.data[n].game_id).then((function(e){t.push(e.data.title),console.log(t),a.setState({library:t})}))}))},a.handleFieldChange=function(e){a.setState({searchField:e.target.value})},a.handleNameChange=function(e){a.setState({nameField:e.target.value})},a.handleNameChangeSubmit=function(){""!==a.state.nameField&&(v.changeName(a.state.nameField,a.state.currentUser),a.setState({greenAlert:"col-12 alert alert-success visible"}))},a.handleGameSearch=function(){v.searchGames(a.state.searchField).then((function(e){console.log("Searched successfully");for(var t=[],n=1;n<20;n+=2){console.log(e.childNodes[0].childNodes[n]);var s=e.childNodes[0].childNodes[n].childNodes[1].getAttribute("value"),r=e.childNodes[0].childNodes[n].getAttribute("id");t.push({title:s,id:r}),a.setState({gamesSearched:t})}}))},a.saveBtnPress=function(e){var t=e.target.getAttribute("bggid"),n=e.target.getAttribute("title"),s=a.state.currentUser;console.log("You clicked a save button with bggId: "+t);var r=a.state.library;r.push(n),v.addGame({title:n,bggId:t,imageString:"https://via.placeholder.com/150"}).then((function(e){a.setState({library:r}),v.addUserGame({userId:s,gameId:e.data.id})}))},a.state={nameField:"",searchField:"",gamesSearched:[],currentUser:1,library:[],greenAlert:"col-12 alert alert-success invisible"},a}return Object(m.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(x,{}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-12 text-center",children:[Object(a.jsx)("h1",{children:"Welcome to bgg-tracker"}),Object(a.jsx)("h3",{children:"Edit your Name and Collection here"})]}),Object(a.jsx)("div",{className:this.state.greenAlert,role:"alert",children:"Changed your name successfully!"}),Object(a.jsx)("br",{}),Object(a.jsx)("h4",{className:"text-center",children:"Display Name Change"}),Object(a.jsxs)("div",{className:"input-group mb-4 text-center",children:[Object(a.jsx)("input",{onChange:this.handleNameChange,type:"text",className:"form-control"}),Object(a.jsx)("div",{className:"input-group-append",children:Object(a.jsx)("button",{onClick:this.handleNameChangeSubmit,className:"btn btn-primary text-white btn-outline-secondary",type:"submit",children:"Update"})})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)("h2",{children:"Your Current Library"}),Object(a.jsx)(N,{library:this.state.library})]}),Object(a.jsx)("br",{}),Object(a.jsx)("h4",{className:"mt-5",children:"Search"}),Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("input",{type:"text",onChange:this.handleFieldChange,className:"form-control"}),Object(a.jsx)("div",{className:"input-group-append",children:Object(a.jsx)("button",{className:"btn text-white btn-success btn-outline-secondary",type:"submit",onClick:this.handleGameSearch,children:"Search"})})]}),Object(a.jsx)(I,{results:this.state.gamesSearched,saveBtnPress:this.saveBtnPress})]})})]})}}]),n}(s.Component),S=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).openMeetupInfo=function(){localStorage.setItem("meetupName",e.props.name),localStorage.setItem("ownerId",e.props.ownerId),localStorage.setItem("timeInfo",e.props.timeInfo),localStorage.setItem("locationInfo",e.props.locationInfo),localStorage.setItem("extraInfo",e.props.extraInfo),localStorage.setItem("currentUser",e.props.currentUser),localStorage.setItem("thisMeetId",e.props.thisMeetId),window.open("/meetup-info","_blank")},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"row justify-content-center border bg-primary rounded my-4",children:Object(a.jsxs)("div",{onClick:this.renderModal,className:"col-9 bg-secondary border rounded my-3",children:[Object(a.jsx)("h2",{children:this.props.name}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:this.props.timeInfo}),Object(a.jsx)("li",{children:this.props.locationInfo}),Object(a.jsx)("li",{children:this.props.extraInfo})]}),Object(a.jsx)("button",{onClick:this.openMeetupInfo,className:"btn btn-info text-white mb-3",children:"Details Page"})]})})}}]),n}(s.Component),M=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){console.log("MeetupPage did mount."),v.getMeetupByOwner(a.state.currentUser).then((function(e){console.log("Did Mount Results"),console.log(e),a.setState({displayedMeets:e.data})}))},a.state={displayedMeets:[],typeToDisplay:"Meetups",currentUser:1},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(x,{}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12 text-center mb-5",children:Object(a.jsx)("h1",{children:"View posted meetups!"})})}),Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("h2",{children:["Now showing: ",this.state.typeToDisplay]}),this.state.displayedMeets.map((function(t,n){return Object(a.jsx)(S,{name:t.meetup_name,ownerId:t.owner_id,timeInfo:t.time_info,locationInfo:t.location_info,extraInfo:t.extra_info,currentUser:e.state.currentUser,thisMeetId:t.id},n)}))]})})]})]})}}]),n}(s.Component),U=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).handleTitleUpdate=function(e){a.setState({titleField:e.target.value})},a.handleTimeUpdate=function(e){a.setState({timeField:e.target.value})},a.handleLocationUpdate=function(e){a.setState({locationField:e.target.value})},a.handleExtraUpdate=function(e){a.setState({extraField:e.target.value})},a.addNewMeetup=function(){if(""===a.state.titleField||""===a.state.timeField||""===a.state.locationField||""===a.state.extraField)a.setState({redAlert:"col-12 my-3 alert alert-danger visible"});else{var e=a.state.titleField,t=a.state.timeField,n=a.state.locationField,s=a.state.extraField,r=a.state.currentUser;v.addMeetup({name:e,timeInfo:t,locationInfo:n,extraInfo:s,ownerId:r}).then((function(e){console.log(e),a.setState({redAlert:"col-12 alert alert-danger invisible"}),a.setState({greenAlert:"col-12 alert alert-success visible"}),a.setState({titleField:""}),a.setState({timeField:""}),a.setState({locationField:""}),a.setState({extraField:""})}))}},a.textInput=r.a.createRef(),a.state={titleField:"",timeField:"",locationField:"",extraField:"",currentUser:1,redAlert:"col-12 alert alert-danger invisible",greenAlert:"col-12 alert alert-success invisible"},a}return Object(m.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(x,{}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12 text-center",children:[Object(a.jsx)("h1",{children:"Post a New Meetup"}),Object(a.jsx)("h3",{children:"Enter all the information your guests need about your gathering"}),Object(a.jsx)("h4",{children:"Make sure your guests know what name to search for to rsvp!"})]})}),Object(a.jsxs)("div",{className:"row justify-content-center",children:[Object(a.jsx)("div",{className:this.state.greenAlert,role:"alert",children:"Added your Meetup Successfully!"}),Object(a.jsx)("h4",{className:"col-12",children:"Meetup Title"}),Object(a.jsx)("input",{id:"meetup-title",maxLength:"255",ref:this.textInput,value:this.state.titleField,onChange:this.handleTitleUpdate,type:"text",className:"form-control"}),Object(a.jsx)("h4",{className:"col-12",children:"Time Info"}),Object(a.jsx)("input",{id:"time-input",maxLength:"255",ref:this.textInput,value:this.state.timeField,onChange:this.handleTimeUpdate,type:"text",className:"form-control"}),Object(a.jsx)("h4",{className:"col-12",children:"Location Info"}),Object(a.jsx)("input",{id:"location-input",maxLength:"255",ref:this.textInput,value:this.state.locationField,onChange:this.handleLocationUpdate,type:"text",className:"form-control"}),Object(a.jsx)("h4",{className:"col-12",children:"Extra Info"}),Object(a.jsx)("input",{id:"extra-input",maxLength:"255",ref:this.textInput,value:this.state.extraField,onChange:this.handleExtraUpdate,type:"text",className:"form-control"}),Object(a.jsx)("div",{className:this.state.redAlert,role:"alert",children:"Make sure you leave no fields empty."}),Object(a.jsx)("div",{className:"input-group-append my-3 align-center",children:Object(a.jsx)("button",{className:"btn btn-primary text-white btn-outline-secondary",onClick:this.addNewMeetup,type:"submit",children:"Add Meetup"})})]})]})]})}}]),n}(s.Component),C=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){console.log("Att library Mounted"),v.setCurrentUser(a.props.attId).then((function(e){a.setState({name:e.data.name})}));var e=[];v.findUserGameByUser(a.props.attId).then((function(t){for(var n=0;n<t.data.length;n++)v.getGameById(t.data[n].game_id).then((function(t){e.push(t.data)}))})),console.log(e),setTimeout((function(){a.setState({gamesArray:e})}),1e3),a.setState({gamesArray:e})},a.state={name:"",gamesArray:[]},a}return Object(m.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"library",children:[Object(a.jsxs)("h3",{children:[this.state.name," is bringing..."]}),Object(a.jsx)("div",{className:"library",children:Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"#"}),Object(a.jsx)("th",{scope:"col",children:"Game"})]})}),Object(a.jsx)("tbody",{children:this.state.gamesArray.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:t+1}),Object(a.jsx)("td",{children:e.title})]})}))})]})})]})}}]),n}(s.Component),F=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){console.log("MeetupInfo Mounted with the following state..."),console.log(a.state),v.setCurrentUser(a.state.ownerId).then((function(e){console.log(e),a.setState({ownerName:e.data.name})})),v.findUserGameByUser(a.state.ownerId).then((function(e){console.log(e.data);for(var t=[],n=0;n<e.data.length;n++)v.getGameById(e.data[n].game_id).then((function(e){t.push(e.data.title),a.setState({ownerCollection:t})}))})),v.findUserMeetupByMeetup(a.state.thisMeetId).then((function(e){var t=[];e.data.forEach((function(e){t.push(e.attendee_id)})),a.setState({attendees:t})}))},a.handleRSVP=function(){v.addUserMeetup({meetupId:a.state.thisMeetId,attendeeId:a.state.currentUser}).then((function(e){console.log("Added usermeetup association"),console.log(e.data)}))},a.state={name:localStorage.meetupName,ownerId:localStorage.ownerId,timeInfo:localStorage.timeInfo,locationInfo:localStorage.locationInfo,extraInfo:localStorage.extraInfo,currentUser:localStorage.currentUser,thisMeetId:localStorage.thisMeetId,ownerName:"",attendees:[],ownerCollection:[]},a}return Object(m.a)(n,[{key:"render",value:function(){var e=[];return this.state.attendees.forEach((function(t){e.push(Object(a.jsx)(C,{attId:t}))})),Object(a.jsxs)("div",{children:[Object(a.jsx)(x,{}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12 text-center my-5 border rounded text-white bg-secondary",children:[Object(a.jsxs)("h1",{children:["Meetup: ",this.state.name]}),Object(a.jsxs)("h2",{children:["This meetup created by ",this.state.ownerName]}),Object(a.jsxs)("ul",{children:[Object(a.jsxs)("p",{className:"bg-dark rounded",children:["Time: ",this.state.timeInfo]}),Object(a.jsxs)("p",{className:"bg-dark rounded",children:["Location: ",this.state.locationInfo]}),Object(a.jsxs)("p",{className:"bg-dark rounded",children:["Information: ",this.state.extraInfo]})]})]})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsxs)("h3",{children:[this.state.ownerName," is bringing..."]}),Object(a.jsx)(N,{library:this.state.ownerCollection}),e]})}),Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("button",{onClick:this.handleRSVP,className:"btn btn-primary",children:"RSVP"})})]})]})}}]),n}(s.Component);var k=function(){return Object(a.jsx)(o.a,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{path:"/user-page",children:Object(a.jsx)(w,{})}),Object(a.jsx)(l.a,{path:"/meet-ups",children:Object(a.jsx)(M,{})}),Object(a.jsx)(l.a,{path:"/new-meet-up",children:Object(a.jsx)(U,{})}),Object(a.jsx)(l.a,{path:"/meetup-info",children:Object(a.jsx)(F,{})}),Object(a.jsx)(l.a,{path:"/",children:Object(a.jsx)(h,{})})]})})};i.a.render(Object(a.jsx)(d.a,{domain:"dev-2mgwus7l.us.auth0.com",clientId:"4h0pXzoUCOBs3G2FESKvBjMTQekUJTRk",redirectUri:window.location.origin,children:Object(a.jsx)(k,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.2a7332e6.chunk.js.map